# 🛜 [네트워크] AWS EC2 에 SSH 프로토콜로 접속 및 파일 전송하기

https://cs-study1.tistory.com/56
🛜 [네트워크] SSH 프로토콜을 이용하여 랩탑으로 데스크탑에 접속하기
네트워크 , 네트워크 관리사를 공부하면서 Telnet 과 (Telnet 보다) 보안이 강화된 SSH 프로토콜들에 대한 개념을 배웠다.두 프로토콜 모두 원격으로 특정 기기에 접속할 수 있는 기능이라고 정리했
cs-study1.tistory.com
이전 포스팅을 통해 SSH 프로토콜로 내 로컬 데스크탑에 접속에 성공하였다. 노트북으로 데스크탑에 접속하여 데스크탑을 제어하는 명령들을 실행 해 봤는데, 이 것은 실질적으로 AWS의 EC2 에 접속하여 EC2 를 제어하기 위한 연습이였다.(큰 그림)
개인적으로 클라우드 컴퓨터에 대해 많은 관심을 가지고 있기 때문에, 이를 개념적으로 보다 잘 이해하고, 잘 조작하기 위해 네트워크와 리눅스 같은 항목들을 공부한다고 해도 과언이 아니다.
따라서 앞서 연습한 대로 이제 AWS에서 미리 발급받아 놓은 내 EC2 에 접속하고, 간단한 파일들을 전송을 실습해 보기로 한다.
(괜히 일찍 만들어놔서 요금이 4달라씩 청구되고 있다ㅜㅜ)
1. EC2 인스턴스 활성화 하기
지금은 전원이 꺼져있는 상태라고 봐도 무방하다. AWS 홈페이지에 들어가서 내 인스턴스를 시작 시킨다.( 전원을 킨다.)
인스턴스 시작은 항상 무섭다...뭔가 요금 청구할 것 같다.
2. 퍼블릭 IP 주소를 확인한다
내 데스크탑에 접속할 때도, 데스크탑의 IP를 입력하여 접속한 것 처럼. EC2 의 퍼블릭 IP 를 터미널에 입력하여 EC2 에 접속할 수 있다.
인스턴스 ID 를 눌러, 인스턴스의 세부 내용을 열고 퍼블릭 IP 주소를 확인 해 놓는다.
AWS 는 정보를 공개하는 것 자체가 무섭다. 모두 비공개 처리
3. EC2 에서 발급받은 .pem 파일이 있는 곳에서 터미널을 실행한다.
EC2 인스턴스를 새로 발급받으면 각종 설정을 마친 뒤에 pem 파일을 생성해주는데, 이 파일을 이용하여 자격증명을 하여 SSH 프로토콜로 EC2에 접속을 할 수 있다. 이 pem 파일이 있는 곳에서 (혹은 디렉터리를 이동하여) 터미널을 열고, SSH 연결 명령어와 pem 파일명, EC2 정보를 입력한다. EC2 정보 뒤에는 앞서 확인한 퍼블릭 IP 주소를 입력한다.
ssh -i myServer.pem ec2-user@123.123.123.12
무서워서 뭔가 개인정보는 다 가렸다...
접속을 시도하다가 중간에 정말 접속하겠냐고 물어보면 yes 를 입력해준다.
접속에 성공하면 저 비둘기가 접속을 환영해주고. 명령 프롬프트도 ec2-user 로 변경된다.
SSH 프토콜로 미리 연습을 해서 그런지 비밀번호 대신 pem 파일로 인증하는 것 빼고 접속까지 상당히 익숙한 느낌이 들었다.
예전에 만들어 두었던 폴더에도 들어가보고 새로운 폴더도 만들어보면서 조작을 연습했다. 이제 newFolder에 간단한 파일을 전송해본다.
4. 파일 전송하기
S3 bucket 이 있다면 EC2 와 연결하여, bucket에 업로드 한 파일을 손쉽게 EC2 로 전송할 수 있는 걸로 알고 있는데, 이번엔 그냥 단순 무식한 방법으로 노트북 로컬에 있는 파일을 EC2 로 전송해보기로 한다. (의도적 GUI 안쓰기 중)
명령어는 좀 더 복잡해졌다. 전송을 위해 EC2 가 연결된 터미널이 아닌, 로컬을 가르키고 있는 터미널에서 실행한다.
scp -i your-key-file.pem local-file-path ec2-user@your-ec2-public-ip:/remote-directory/
키노트 파일인 idea2.key 를 보내기로 결정.
pwd 명령어를 활용하여 복사 붙여넣기를 잘 활용해서 내 로컬 주소와 실제로 파일을 보낼 원격 EC2 주소를 정확히 입력해준다.
두근두근
데스크탑에 보낼때 처럼 뭔가 100% 가 보이고, 용량과 전송 시간 등이 보인다. 이제 EC2 에 실제로 파일이 있는지 확인하러 가즈아
있....다!
새로 만든 폴더에 파일이 도착한 것을 확인할 수 있다.
5. 마무리
데스크탑에서 이미 연습해 봤지만, 실제로 EC2에 접속 및 파일전송 실습을 해보니, 꼬이는 일 없이 한번에 수월하게 돼서 매우 뿌듯하다.
마지막으로 EC2 와 연결된 터미널에서 연결 종료를 위해 종료 명령어를 입력한다.
exit
정상적으로 로그 아웃
접속 종료가 완료 되었으면 인스턴스도 꼭 중지하도록 한다.
과금이야 말로 정말 사용자로 하게끔 철저한 커넥션 관리 및 보안 유지를 하게 하는 원동력 같다.
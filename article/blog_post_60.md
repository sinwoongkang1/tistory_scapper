# [리눅스] 무선 네트워크 연결 시도하기 - 1

무선 네트워크 인터페이스를 활성화 하고, 드라이버를 다운받고 설치하기 위해 먼저 유선 인터넷을 연결해주었다.
유선 인터넷으로 - 패키지 매니져 업데이트, -무선 네트워크 인터페이스의 드라이버 설치, -무선 네트워크 장치 활성화, - 연결 순으로 진해해보려 한다. 큰 에러나 이상 상황 없길 바라며 시작!!!!
유선 접속을 시작한다.
1. 현재 넷북의 네트워크 인터페이스와 그 상태확인
시스템의 네트워크 정보를 알기위해 ip a 명령어를 실행한다.
ip a
이 넷북에는 네트워크 인터페이스가 2개( enp9s0, enp5s0)가 존재하고 있었다. 유선 네트워크를 연결하기 위해서는 enp9s0 또는 enp5s0 의 인터페이스에 inet 정보와 ip 주소들이 보여야 하는데, 유선연결을 했음에도 보이지 않고 있다. 이에 네트워크 설정에 문제가 있는 것 같아 일단 네트워크 설정을 재 시작한다.
sudo systemctl restart networking
위 명령어가 오류가 발생했다. 찾아보니 Ubuntu Server 18.04 LTS에서는 networking.service 대신 netplan을 사용하여 네트워크를 관리하기 때문에. netplan을 통해 네트워크 설정을 할 수 있다고 한다. /etc/netplan 경로로 접근하여 설정파일을 열어보기로 한다.
netplan 경로에 설정 파일들이 있다.
설정이 제대로 되어있는 것 같은데, 유선 인터넷 연결은 되지 않고 있다.
유선 네트워크를 식별하는 네트워크 인터페이스 장치가 제대로 동작을 안하는건지, 활성화가 안되어 있는 것 인지 확인하기 위해
활성화 명령어를 실행한다.
sudo ip link set enp9s0 up
처음 ip a 를 실행했을 때와 다르게 state 정보가 DOWN 이 UP으로 변경되었다!!!
아... 이게 설정 문제가 아니라 state DOWN 이 표시된다면, 네트워크 인터페이스가 비활성화 상태였다는 것을 알게 되었다.
하지만 아직 IP 할당이 안되고 있으니. 라우터에게 아이피 할당을 받기위해 명령어를 실행한다.
sudo dhclient enp9s0
아이피와/서브넷마스크 를 잘 할당받았다.
핑 테스트를 통해 인터넷 연결이 잘 되었는지 확인한다.
ping google.com
핑 테스트가 잘 수행되고 있다. Ctrl + C 를 눌러 종료한다.
유선연결은 성공 했다!! 이제 무선 연결을 해보자!
2. 무선 네트워크 설정을 위한 패키지 매니져 업데이트
이제 무선 네트워크 설정을 위해 다시 패키지 매니져 업데이트 부터 시작한다.
sudo atp update
업데이트가 완료되면 와이파이 장치가 있나 확인한다.
lspci | grep -i network
Realtek RTL8192SE 무선 LAN 컨트롤러가 인식된다. 이에 맞는 드라이버를 설치해준다.
sudo apt install rtl8192se-dkms
해당 드라이버가 검색되지 않는다.
해결 방법을 찾아보니 무선 랜 드라이버를 모듈로 설치해야 한다고 해서 모듈 관리 유지 도구인
DKMS 패키지를 설치한다.
sudo apt install dkms
설치가 완료되면 드라이버 소스 다운로드 한다.
설치 드라이버를 검색해보니 모델에 맞는 드라이버를 Git 저장소에 올려놔서 Git 저장소를 클론 해온다.
( Git 이 설치되어 있지 않으면 Git 을 먼저 설치한다. sudo apt install git, 이후 클론할 폴더를 만들고 Git init 후 클론. )
git clone https://github.com/ebirbe/rtl8192se-install
클론이 잘 되었다. 드라이버 설치 파일을 실행한다.
sudo ./install.sh
현재 드라이버 설치 과정에서 flex 패키지가 없다는 오류가 발생했다.  패키지를 먼저 설치하고 다시 설치를 진행한다.
sudo apt install flex
설치를 다시 진행한다.
sudo ./install.sh
설치가 완료 되었으므로 무선네트워크 인터페이스가 시스템에 존재하는지 검색해본다.
iwconfig
3.무선 네트워크 검색 및 접속하기
인터페이스가 인식된 것 같다. 하지만 무선랜 인터페이스 같은 경우 인터페이스 이름이 wlan, wlp 로 나오는게 보통인데, enp5s0 으로 보이는게 이상하지만. 일단 활성화 명령어를 입력해본다.
sudo ip link set enp5s0 up
현재 사용가능한 와이파이 목록을 한 번 검색해본다. ( 와이파이가 많아서 방향키로 스크롤 할 수있게 " | less " 를 붙여준다)
sudo iwlist enp5s0 scan | less
사용가능한 무선 네트워크 목록들이 나온다. 인터페이스가 동작하면서 무선 네트워크 검색을 실행하는 것 같다.
이제 현재 우리집에서 사용할 수 있는 무선 네트워크에 접속을 시도한다 ( 드디어!!!)
접속 명령어를 입력한다.
sudo iwconfig enp5s0 essid "SK_WIFIGIGA144A" key s:*************
ip 주소도 할당 받기위해 명령어를 입력한다.
sudo dhclient enp5s0
라우터 문제는 아닐테고, 넷북 문제도 아닐텐데 IP를 할당하는데 시간이 좀 걸렸다.( 5분 정도 )
대망의 ping test 를 해본다.
이상하다. 무선 네트워크가 접속되지 않는다. ip a 와 iwconfig 를 다시 실행해본다.
무선 네트워크 드라이버는 설치되어 네트워크 ID 는 접속된 것으로 보이는데, IP 할당이 되지 않은 상태이고.
인터페이스가 여전히 state DOWN 으로 표시되고 있다.
dmesg 명령어를 사용하여 커널 로그를 확인하고,
무선 드라이버와 펌웨어가 제대로 설치되었는지
, 오류메시지는 있는지 확인힌다.
dmesg | grep -i enp5s0
이 반환 값을 통해 알 수 있는 것은
WEP 관련 오류: 무선 네트워크가 WEP(Wired Equivalent Privacy) 보안을 사용하고 있는데, 설정된 WEP 키의 유형이 잘못되었거나 지원되지 않는 형식이라는 것을 의미한다.
인터페이스 이름 변경: wlan0에서 enp5s0로 이름이 변경됨.
급 마무리 ( 잘 시간 다 됨 )
일단 인터페이스 이름이 무선 네트워크의 상징이자 근본인 wlan0 이였기 때문에 이름을 변경해주고, WEP 관련 오류는 다음 포스팅에서 해결해보기로 하자!
sudo ip link set <현재인터페이스명> name <새인터페이스명>
혹시 인터페이스가 사용 중이라면 사용을 종료하고 이름을 변경할 수 있다.
sudo ip link set <인터페이스명> down
인터페이스명이 wlan0 으로 변경된 것을 확인할 수 있다.
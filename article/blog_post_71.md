# [명령어 알아보기] route & ip

route 명령어는 라우팅 테이블을 관리하고 표시하는 데 사용되는 명령어 이다. 이 명령어를 통해 현재 설정된 라우팅 정보를 확인하거나 새로운 라우팅 규칙을 추가하거나 삭제할 수 있다.
라우팅 테이블이란 네트워크 장치가 패킷을 전송할 때, 어떤 경로를 사용할지를 결정하기 위해 사용하는 데이터 구조.
즉 라우팅 테이블은 네트워크의 목적지 주소와 해당 목적지로 가는 경로(다음 홉 주소 또는 인터페이스)를 포함하고 있다.
1. 명령어 실행
생각보다 정보가 별로 없다...!
Iface 는 인터페이스 장비인 것 같다. 즉 인터페이스 장비별로 라우팅 테이블을 보여주는 것 같다. 각 항목별 의미를 알아보면
Destination : 패킷이 도달해야 할 네트워크 또는 호스트의 IP 주소.
Gateway : 패킷이 목적지로 전송되기 전에 거쳐야 할 다음 홉의 IP 주소.
Genmask : 서브넷 마스크, 목적지 주소가 어떤 네트워크에 속하는지 결졍하는데 사용
Flags : 경로가 활성 상태면 U, 경로가 게이트워이를 사용하면 G 를 표시한다.
Metric : 경로의 우선순위로, 값이 낮을수록 우선순위가 높다. ( 여러 경로가 있을 때 우선순위로 선택하기 위함)
Ref : 경로가 참조된 횟수. 일반적으로 잘 사용하지 않아 대부분 0으로 표시된다.
Use : 해당 경로를 통해 전송된 패킷의 수 ( 네트워크 사용량 분석에 유용하게 쓰일 수 있음)
생각보다 라우팅 테이블과 네트워크에 대한 정보가 많지 않다는 것을 확인할 수 있었다. 이에 추가로 검색을 해보니 네트워크 환경이 점점 복잡해지고 다양한 프로토콜과 설정이 생겨나면서 ip 라는 명령어로 좀 더 자세한 정보를 알 수 있다고 한다.
ip 명령어를 실행 해 보도록 한다.
ip 명령을 단독으로 사용하면 안되고 다양한 옵션들과 함께 사용해야 유의미한 정보를 알 수 있다. 라우팅 테이블을 자세히 보기위해 ip route 명령어를 실행해 본다.
ip route
생각보다 안 자세한데...?
route 명령어로 확인했을 때 처럼 3가지 인터페이스에 대한 정보를 보여주고 있었다. 솔직히 route 명령어는 띄어쓰기도 되어있고 표 형식으로 되어서 가독성이 좋았던 것 같은데... 생각보다 불친절한 출력이다. 그래도 각 항목별로 살펴보면
인터페이스장비 / 네트워크 경로 / 인터페이스 이름 / IP 할당방식 / 패킷의 출발지 IP 주소 / 우선순위
위 형태로 출력되는 것을 알 수 있었다.(별 차이 없는데...?)
2. 주요 옵션과 함께 사용하기
ip addr : 네트워크 인터페이스의 IP 주소를 표시하고 관리할 수 있다.
ifconfig 에서 확인했던 내용과 상당히 흡사했다. 패킷 송수신 정보에 대한 내용만 다른 것 같다.
ip -s addr 명령어로 패킷 송수신 내용을 함께 출력할 수 있었다.
ip -s addr
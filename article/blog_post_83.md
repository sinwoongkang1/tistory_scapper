# [Network] 라우터 설정으로 모든 기기들을 같은 서브넷으로 설정하기

회사에서 사용하다가 집으로 가져온 NAS가 창고에서 썩고 있었다. 좀 오래된 모델이긴 하지만, 서버의 기능을 살려서 공부한 다앙한 네트워크 프로토콜들을 실습해보도록 하자.
요즘 모델들은 Docker 가 설치 가능해서, 리눅스를 설치하거나 DB 서버로 사용가능하다고 하지만 내가 가지고 있는 모델은 AMD 아키텍쳐를 기반으로 하고 있기 때문에 아쉽게도 Docker를 설치할 수는 없었다.
그래도 이용가능한 서비스로 VPN, SAMBA, 네트워크 프린터 등을 지원하기 때문에 활용도가 매우 높을 것 같다
먼저 먼지 구덩이에 있던 녀석들을 분해해서 깨끗하게 청소해주었다.
조립은 분해의 역순!!
조립을 완료하고 ISP 에서 제공한 ( SK브로드밴드) 라우터에 유선 연결하고, 설정 페이지에서 IP 할당을 기다렸다.
그런데 유선 연결 서브넷인 192.168.55.XX 로 할당되는 IP가 아니라 192.168.35.XX 아이피로 할당되는 것을 확인했다.
순간 집 구성된 네트워크 구조에 대해 큰 깨달음을 얻게 되었다.
여태 ISP 라우터를 통해 데스크탑이 다른 서브넷으로 서브넷팅 되어 있다고 생각했었는데, 집 벽에 있는 유선 네트워크 연결은 라우터가 아니라 다른 네트워크 장치로 인해 서브넷팅 되었다는 것이였다.
102동 704호에 살고 있고있어서 서버 이름을 이렇게 설정해주었다.
모든 퍼즐이 맞춰지는 기분이였다.
데스크탑(유선)과 라우터의 게이트웨이 주소는 그래서 192.168.55.1 이 기본 게이트웨이 였고, ISP 에 연결된 기기들의 게이트웨이는 192.168.35.1 이 기본 게이트웨이였던 것이다.
종합해서 우리집의 네트워크 상태를 도식화 하면 아래와 같다고 이해하였다.
데스크탑(유선)과 라우터의 게이트웨이 주소는 그래서 192.168.55.1 이 기본 게이트웨이 였고, ISP 에 연결된 기기들의 게이트웨이는 192.168.35.1 이 기본 게이트웨이였던 것이 이제야 이해 되었다.
그렇다면 ISP 공유기가 독자적으로 192.168.35.X 라는 서브넷을 만들고 아이피를 할당하는게 아니라, 그냥 브릿지의 역할을 수행하면 집안에 연결된 모든 기기들이 같은 서브넷으로 연결 될 것이다.
라우터 설정페이지에 접속하여 운용모드를 Gateway 에서 Bridge 로 변경한다.
하다가 안되면 리셋을 누르거나 Gateway로 다시 변경해도 부담이 없다. 그리고 잘못될 것도 없다!! 바로 고고!!
NAS 에 다시 접속하니 로컬 IP 주소가 192.168.55.28 로 할당 받았다는 것을 확인하였다.
드디어 유무선 같은 서브넷으로 셋팅이 되었다. 이제 간단한 SMB 프로토콜로 파일 공유를 실험해보자.
NAS 의 SMB Service 를 실행하고 공유할 사진들을 올려놓는다.
데스크탑에서 파일 탐색기 메뉴의 네트워크에 들어오고 서버 URL 을 입력해준다.
서버 URL 은 NAS의 설정 메뉴에서 친절히 알려준다
연결이 완료되었다. NAS 에 접속하여 파일들을 마음껏 공유할 수 있게 되었다.
폴더에 자주 접근할 것이기 때문에 즐겨찾기 추가개념인 위치에 추가를 사용한다.
이 설정을 나의 랩탑들에도 해준다. 그러면 어디서든지 나의 NAS의 폴더에 접근하여 파일을 공유하고 업데이트 할 수 있다!!
맥북의 경우 Finder - 이동 - 서버에연결 순서대로 접속하여 같은 SMB 의 URL 을 입력하면 손쉽게 셋팅이 완료된다!
마무리
유,무선 같은 서브넷팅에 성공하여 기쁜 나머지, SMB 만 실습을 했다. 배운대로라면 파일공유에 좋은 프로토콜은 NFS 인데!!
SMB, NFS, FTP 를 모두 실습해봤으니, 가지고 있는 운영체제와 상황에 맞는 프로토콜을 선택하여 다시 셋팅해보도록 하고,
이제 내가 구축한 HomeNetwork 를 외부에서도 접근할 수 있도록 포트포워딩, VPN 셋팅에 대해서도 공부하여 진행해보도록 하자!